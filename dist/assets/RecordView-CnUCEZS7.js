import{e as E,y as F,z as h,A as U,j as x,r as b,C as d,D as k,E as o,F as n,G as l,L as p,H as N,I as C,J as G,o as I,K as D,M as J,_ as K}from"./index-BK1kHPWn.js";import{a as W,b as q}from"./headers-CJxyjWvY.js";import{_ as O,N as P}from"./a-Cu7j9yr-.js";import{d as Q,_ as X}from"./Space-6TIHxQxP.js";import{_ as Y,a as Z,b as $}from"./ListItem-LVIN4sk-.js";import{_ as ee}from"./Tag-CtEYpnsM.js";const le=E({__name:"RecordView",setup(te){const S=F(),{users:c}=h(S),M=U(),{records:m}=h(M),R=x(()=>c.value.length===0||m.value.length===0);function T({openRecordModal:t}){return[{title:"🍀玩家",key:"more",render(e){return I(P,{href:"javascript:;",onClick:()=>t(e)},{default:()=>{var a;return(a=c.value.find(u=>{var s;return u.sw===((s=e.data.find(_=>_.bonus===6))==null?void 0:s.sw)}))==null?void 0:a.username}})}},{title:"人数",key:"count"},{title:"时间",key:"datetime"}]}const V=T({openRecordModal(t){i.value=!0,g.value=t.data}}),f=x(()=>m.value.map(t=>{var a,u;const e=(a=t.data.find(s=>s.bonus===6))==null?void 0:a.sw;return{luckySW:e,showname:(u=c.value.find(s=>s.sw===e))==null?void 0:u.showname,count:t.data.length,...t}}).sort((t,e)=>new Date(e.datetime).getTime()-new Date(t.datetime).getTime())),i=b(!1),g=b([]),w=t=>{switch(t){case 4:return{type:"error",text:"🥇+4"};case 3:return{type:"warning",text:"🥈+3"};case 2:return{type:"info",text:"🥉+2"};case 6:return{type:"success",text:"🍀+6"};case 1:return{type:"default",text:"🍄+1"};default:return{type:void 0,text:void 0}}};return(t,e)=>{const a=O,u=W,s=q,_=Q,j=X,y=K,B=ee,H=$,L=Y,z=Z;return d(),k(C,null,[o(_,{vertical:""},{default:n(()=>[o(a,{title:"注意",type:"warning"},{default:n(()=>e[1]||(e[1]=[l(" 以下数据并非实际比赛数据，仅为测试数据 ")])),_:1}),o(_,{align:"center"},{default:n(()=>[o(u,{class:"m-0"},{default:n(()=>e[2]||(e[2]=[l(" 记录总数 ")])),_:1}),o(s,{class:"m-0"},{default:n(()=>[l(p(f.value.length||"--"),1)]),_:1})]),_:1}),o(j,{columns:N(V),data:f.value,loading:R.value},null,8,["columns","data","loading"])]),_:1}),o(z,{style:{width:"90%","max-width":"750px"},show:i.value,"onUpdate:show":e[0]||(e[0]=r=>i.value=r),preset:"card",title:"对局详情",bordered:!1,"auto-focus":!1},{default:n(()=>[o(L,{bordered:""},{default:n(()=>[(d(!0),k(C,null,G(g.value,r=>(d(),D(H,null,{default:n(()=>[o(_,{justify:"space-between",align:"center"},{default:n(()=>[o(y,null,{default:n(()=>{var v;return[l(p((v=N(c).find(A=>A.sw===r.sw))==null?void 0:v.showname),1)]}),_:2},1024),o(y,null,{default:n(()=>[r.bonus===6?(d(),D(B,{key:0,bordered:!1,size:"small",type:w(r.bonus).type},{default:n(()=>[l(p(w(r.bonus).text),1)]),_:2},1032,["type"])):J("",!0),l(" "+p(r.score),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1},8,["show"])],64)}}});export{le as default};
