import{c as fe,d as pe,a as ve,b as X,f as he,e as ae,u as ge,g as _e,r as m,t as be,h as we,i as oe,j as F,k as ye,l as Se,m as xe,n as J,o as h,B as Te,V as Ce,p as Re,q as Be,T as Fe,w as Ie,s as ke,v as Ve,x as B,y as Oe,z as Y,A as Ae,C as j,D as Z,E as p,F as v,G as M,H as z,I as ee,J as Me,_ as q,K as te,L as G,M as ze}from"./index-BK1kHPWn.js";import{_ as De,N as Ee}from"./a-Cu7j9yr-.js";import{_ as Ne}from"./p-DXR4WiKb.js";import{i as Ue,a as je,N as Pe,b as $e,c as Le,_ as Ke,d as He}from"./Space-6TIHxQxP.js";import{_ as qe,a as Ge,b as Je}from"./ListItem-LVIN4sk-.js";import{_ as ne}from"./Tag-CtEYpnsM.js";function We(t){const{boxShadow2:r}=t;return{menuBoxShadow:r}}const Qe=fe({name:"AutoComplete",common:pe,peers:{InternalSelectMenu:Ue,Input:je},self:We});function Xe(t){return t.map(le)}function le(t){var r,o;return typeof t=="string"?{label:t,value:t}:t.type==="group"?{type:"group",label:(r=t.label)!==null&&r!==void 0?r:t.name,value:(o=t.value)!==null&&o!==void 0?o:t.name,key:t.key||t.name,children:t.children.map(l=>le(l))}:t}const Ye=ve([X("auto-complete",`
 z-index: auto;
 position: relative;
 display: inline-flex;
 width: 100%;
 `),X("auto-complete-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[he({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),Ze=Object.assign(Object.assign({},oe.props),{to:J.propTo,menuProps:Object,append:Boolean,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},defaultValue:{type:String,default:null},loading:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:String,placement:{type:String,default:"bottom-start"},value:String,blurAfterSelect:Boolean,clearAfterSelect:Boolean,getShow:Function,showEmpty:Boolean,inputProps:Object,renderOption:Function,renderLabel:Function,size:String,options:{type:Array,default:()=>[]},zIndex:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onSelect:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],onInput:[Function,Array]}),et=ae({name:"AutoComplete",props:Ze,setup(t){const{mergedBorderedRef:r,namespaceRef:o,mergedClsPrefixRef:u,inlineThemeDisabled:l}=ge(t),y=_e(t),{mergedSizeRef:D,mergedDisabledRef:E,mergedStatusRef:N}=y,I=m(null),g=m(null),k=m(t.defaultValue),P=be(t,"value"),S=we(P,k),_=m(!1),x=m(!1),V=oe("AutoComplete","-auto-complete",Ye,Qe,t,u),s=F(()=>Xe(t.options)),n=F(()=>{const{getShow:e}=t;return e?e(S.value||""):!!S.value}),i=F(()=>n.value&&_.value&&(t.showEmpty?!0:!!s.value.length)),f=F(()=>ye(s.value,Le("value","children")));function b(e){const{"onUpdate:value":a,onUpdateValue:c,onInput:w}=t,{nTriggerFormInput:U,nTriggerFormChange:me}=y;c&&B(c,e),a&&B(a,e),w&&B(w,e),k.value=e,U(),me()}function O(e){const{onSelect:a}=t,{nTriggerFormInput:c,nTriggerFormChange:w}=y;a&&B(a,e),c(),w()}function C(e){const{onBlur:a}=t,{nTriggerFormBlur:c}=y;a&&B(a,e),c()}function T(e){const{onFocus:a}=t,{nTriggerFormFocus:c}=y;a&&B(a,e),c()}function $(){x.value=!0}function L(){window.setTimeout(()=>{x.value=!1},0)}function d(e){var a,c,w;switch(e.key){case"Enter":if(!x.value){const U=(a=g.value)===null||a===void 0?void 0:a.getPendingTmNode();U&&(A(U.rawNode),e.preventDefault())}break;case"ArrowDown":(c=g.value)===null||c===void 0||c.next();break;case"ArrowUp":(w=g.value)===null||w===void 0||w.prev();break}}function A(e){(e==null?void 0:e.value)!==void 0&&(O(e.value),t.clearAfterSelect?b(null):e.label!==void 0&&b(t.append?`${S.value}${e.label}`:e.label),_.value=!1,t.blurAfterSelect&&ce())}function K(){b(null)}function se(e){_.value=!0,T(e)}function re(e){_.value=!1,C(e)}function ue(e){_.value=!0,b(e)}function ie(e){A(e.rawNode)}function de(e){var a;!((a=I.value)===null||a===void 0)&&a.contains(Ve(e))||(_.value=!1)}function ce(){var e,a;!((e=I.value)===null||e===void 0)&&e.contains(document.activeElement)&&((a=document.activeElement)===null||a===void 0||a.blur())}const W=F(()=>{const{common:{cubicBezierEaseInOut:e},self:{menuBoxShadow:a}}=V.value;return{"--n-menu-box-shadow":a,"--n-bezier":e}}),R=l?Se("auto-complete",void 0,W,t):void 0,H=m(null),Q={focus:()=>{var e;(e=H.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=H.value)===null||e===void 0||e.blur()}};return{focus:Q.focus,blur:Q.blur,inputInstRef:H,uncontrolledValue:k,mergedValue:S,isMounted:xe(),adjustedTo:J(t),menuInstRef:g,triggerElRef:I,treeMate:f,mergedSize:D,mergedDisabled:E,active:i,mergedStatus:N,handleClear:K,handleFocus:se,handleBlur:re,handleInput:ue,handleToggle:ie,handleClickOutsideMenu:de,handleCompositionStart:$,handleCompositionEnd:L,handleKeyDown:d,mergedTheme:V,cssVars:l?void 0:W,themeClass:R==null?void 0:R.themeClass,onRender:R==null?void 0:R.onRender,mergedBordered:r,namespace:o,mergedClsPrefix:u}},render(){const{mergedClsPrefix:t}=this;return h("div",{class:`${t}-auto-complete`,ref:"triggerElRef",onKeydown:this.handleKeyDown,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd},h(Te,null,{default:()=>[h(Ce,null,{default:()=>{if(this.$slots.default)return Re(this.$slots,"default",{handleInput:this.handleInput,handleFocus:this.handleFocus,handleBlur:this.handleBlur,value:this.mergedValue});const{mergedTheme:o}=this;return h(Pe,{ref:"inputInstRef",status:this.mergedStatus,theme:o.peers.Input,themeOverrides:o.peerOverrides.Input,bordered:this.mergedBordered,value:this.mergedValue,placeholder:this.placeholder,size:this.mergedSize,disabled:this.mergedDisabled,clearable:this.clearable,loading:this.loading,inputProps:this.inputProps,onClear:this.handleClear,onFocus:this.handleFocus,onUpdateValue:this.handleInput,onBlur:this.handleBlur},{suffix:()=>{var u,l;return(l=(u=this.$slots).suffix)===null||l===void 0?void 0:l.call(u)},prefix:()=>{var u,l;return(l=(u=this.$slots).prefix)===null||l===void 0?void 0:l.call(u)}})}}),h(Be,{show:this.active,to:this.adjustedTo,containerClass:this.namespace,zIndex:this.zIndex,teleportDisabled:this.adjustedTo===J.tdkey,placement:this.placement,width:"target"},{default:()=>h(Fe,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var r;if((r=this.onRender)===null||r===void 0||r.call(this),!this.active)return null;const{menuProps:o}=this;return Ie(h($e,Object.assign({},o,{clsPrefix:t,ref:"menuInstRef",theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,"auto-pending":!0,class:[`${t}-auto-complete-menu`,this.themeClass,o==null?void 0:o.class],style:[o==null?void 0:o.style,this.cssVars],treeMate:this.treeMate,multiple:!1,renderLabel:this.renderLabel,renderOption:this.renderOption,size:"medium",onToggle:this.handleToggle}),{empty:()=>{var u,l;return(l=(u=this.$slots).empty)===null||l===void 0?void 0:l.call(u)}}),[[ke,this.handleClickOutsideMenu,void 0,{capture:!0}]])}})})]}))}}),rt=ae({__name:"FindView",setup(t){const r=Oe(),{users:o}=Y(r),u=Ae(),{records:l}=Y(u),y=F(()=>o.value.length===0||l.value.length===0),D=m(""),E=m(""),N=m([]);function I(s){N.value=o.value.filter(n=>n.sw.includes(s)||n.username.includes(s)||n.nickname&&n.nickname.includes(s)).map(n=>{const i=n.username+(n.nickname?"🆔"+n.nickname:"");return E.value=n.sw,{label:i,value:n.sw}})}const g=s=>{switch(s){case 4:return{type:"error",text:"🥇+4"};case 3:return{type:"warning",text:"🥈+3"};case 2:return{type:"info",text:"🥉+2"};case 6:return{type:"success",text:"🍀+6"};case 1:return{type:"default",text:"🍄+1"};default:return{type:void 0,text:void 0}}};function k({openRecordModal:s}){return[{title:"排名",key:"rank",render(n){return h(Ee,{href:"javascript:;",onClick:()=>s(n)},{default:()=>"#"+n.rank})}},{title:"追加得分",key:"bonus",render(n){return h(q,{},{default:()=>n.bonus!==0?h(ne,{size:"small",bordered:!1,type:g(n.bonus).type},{default:()=>g(n.bonus).text}):""})}},{title:"时间",key:"datetime"}]}const P=k({openRecordModal(s){x.value=!0,V.value=s.data}}),S=m([]);function _(s){const n=l.value.filter(i=>i.data.find(f=>s.includes(f.sw))).map(i=>{const{sw:f,score:b,bonus:O}=i.data.find(T=>s.includes(T.sw)),C=i.data.findIndex(T=>T.sw===f)+1;return{sw:f,rank:C,score:b,bonus:O,...i}}).sort((i,f)=>new Date(f.datetime).getTime()-new Date(i.datetime).getTime());S.value=n}const x=m(!1),V=m([]);return(s,n)=>{const i=De,f=Ne,b=et,O=Ke,C=He,T=Je,$=qe,L=Ge;return j(),Z(ee,null,[p(C,{vertical:""},{default:v(()=>[p(i,{title:"注意",type:"warning"},{default:v(()=>n[2]||(n[2]=[M(" 以下数据并非实际比赛数据，仅为测试数据 ")])),_:1}),p(f,null,{default:v(()=>n[3]||(n[3]=[M("可以通过输入好友编号、游戏名称、昵称来查询。")])),_:1}),p(b,{value:D.value,"onUpdate:value":[n[0]||(n[0]=d=>D.value=d),I],"input-props":{autocomplete:"disabled"},options:N.value,placeholder:"例：“小白”",clearable:"",onSelect:_},null,8,["value","options"]),p(O,{columns:z(P),data:S.value,loading:y.value},null,8,["columns","data","loading"])]),_:1}),p(L,{style:{width:"90%","max-width":"750px"},show:x.value,"onUpdate:show":n[1]||(n[1]=d=>x.value=d),preset:"card",title:"对局详情",bordered:!1,"auto-focus":!1},{default:v(()=>[p($,{bordered:""},{default:v(()=>[(j(!0),Z(ee,null,Me(V.value,d=>(j(),te(T,null,{default:v(()=>[p(C,{justify:"space-between",align:"center"},{default:v(()=>[p(z(q),null,{default:v(()=>{var A;return[M(G((A=z(o).find(K=>K.sw===d.sw))==null?void 0:A.showname),1)]}),_:2},1024),p(z(q),null,{default:v(()=>[d.sw===E.value&&d.bonus?(j(),te(z(ne),{key:0,bordered:!1,size:"small",type:g(d.bonus).type},{default:v(()=>[M(G(g(d.bonus).text),1)]),_:2},1032,["type"])):ze("",!0),M(" "+G(d.score),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1},8,["show"])],64)}}});export{rt as default};
